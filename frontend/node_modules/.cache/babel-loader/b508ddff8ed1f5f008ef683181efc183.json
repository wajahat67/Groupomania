{"remainingRequest":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wajahat98/Desktop/projet_7/frontend/src/components/PostModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wajahat98/Desktop/projet_7/frontend/src/components/PostModal.vue","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/babel.config.js","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646241805660},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js","mtime":1646241806090},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1646241805660},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1646241806077}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3dhamFoYXQ5OC9EZXNrdG9wL3Byb2pldF83L2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgeyBYQ2lyY2xlSWNvbiB9IGZyb20gIkBoZXJvaWNvbnMvdnVlL3NvbGlkIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwb3N0TW9kYWwiLAogIGNvbXBvbmVudHM6IHsKICAgIFhDaXJjbGVJY29uOiBYQ2lyY2xlSWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6ICIiLAogICAgICBmaWxlOiBudWxsLAogICAgICBsaW5rOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoewogICAgdmFsaWRhdGVkRmllbGRzOiBmdW5jdGlvbiB2YWxpZGF0ZWRGaWVsZHMoKSB7CiAgICAgIGlmICh0aGlzLm1lc3NhZ2UgIT0gIiIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCBtYXBTdGF0ZSh7CiAgICBtZXNzYWdlczogZnVuY3Rpb24gbWVzc2FnZXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm1lc3NhZ2U7CiAgICB9CiAgfSkpLAogIG1ldGhvZHM6IHsKICAgIHVwbG9hZEZpbGU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7CiAgICAgIHZhciBmaWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgfSwKICAgIHN1Ym1pdFBvc3Q6IGZ1bmN0aW9uIHN1Ym1pdFBvc3QoKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvLyBQZXJtZXQgZGUgdHJhbnNtZXR0cmUgbGUgZm9ybXVsYWlyZSBkYW5zIHVuIGZvcm1hdCBhZGFwdMOpIGF1IGJhY2tlbmQKCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgibWVzc2FnZSIsIHRoaXMubWVzc2FnZSk7CgogICAgICBpZiAodGhpcy5saW5rICE9PSBudWxsKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJsaW5rIiwgdGhpcy5saW5rKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZmlsZSAhPT0gbnVsbCkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2UiLCB0aGlzLmZpbGUpOwogICAgICB9CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY3JlYXRlUG9zdCIsIGZvcm1EYXRhKTsKICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgLy8gUGVybWV0IGRlIHJlc2V0IGxlIGZvcm11bGFpcmUKICAgICAgdGhpcy5tZXNzYWdlID0gIiI7CiAgICAgIHRoaXMubGluayA9IG51bGw7CiAgICAgIHRoaXMuJHJlZnMuZmlsZS52YWx1ZSA9IG51bGw7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIpOwogICAgICB0aGlzLnJlc2V0Rm9ybSgpOyAvLyBSZXNldCBkdSBmb3JtdWxhaXJlIMOgIGxhIGZlcm1ldHVyZSBkZSBsYSBtb2RhbAogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/wajahat98/Desktop/projet_7/frontend/src/components/PostModal.vue"],"names":[],"mappings":";;AA0FA,SAAS,WAAT,QAA4B,sBAA5B;AACA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,WADO;AAGb,EAAA,UAAU,EAAE;AAAE,IAAA,WAAU,EAAV;AAAF,GAHC;AAKb,EAAA,IAAI,EAAE,gBAAW;AACf,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,IAAI,EAAE,IAFD;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP;AAKD,GAXY;AAab,EAAA,QAAQ;AACN,IAAA,eAAe,EAAE,2BAAW;AAC1B,UAAI,KAAK,OAAL,IAAgB,EAApB,EAAwB;AACtB,eAAO,IAAP;AACF,OAFA,MAEO;AACL,eAAO,KAAP;AACF;AACD;AAPK,KASH,QAAQ,CAAC;AAAE,IAAA,QAAQ,EAAE,kBAAC,KAAD;AAAA,aAAW,KAAK,CAAC,OAAjB;AAAA;AAAZ,GAAD,CATL,CAbK;AAyBb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACM;AACX,UAAM,IAAG,GAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAsB,CAAtB,CAAb;AACA,WAAK,IAAL,GAAY,IAAZ;AACD,KAJM;AAMP,IAAA,UAAU,EAAE,sBAAW;AACrB,UAAM,QAAO,GAAI,IAAI,QAAJ,EAAjB,CADqB,CACY;;AAEjC,MAAA,QAAQ,CAAC,MAAT,CAAgB,SAAhB,EAA2B,KAAK,OAAhC;;AAEA,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,QAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACF;;AACA,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,QAAA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,IAA9B;AACF;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,QAAnC;AACD,KAlBM;AAoBP,IAAA,SApBO,uBAoBK;AACV;AACA,WAAK,OAAL,GAAe,EAAf;AACA,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,GAAwB,IAAxB;AACD,KAzBM;AA2BP,IAAA,KA3BO,mBA2BC;AACN,WAAK,KAAL,CAAW,OAAX;AACA,WAAK,SAAL,GAFM,CAEY;AACnB;AA9BM;AAzBI,CAAf","sourcesContent":["<template>\n  <transition name=\"modal-fade\">\n    <div class=\"fixed bottom-0 inset-x-0 flex\" @click.stop>\n      <div class=\"fixed inset-0 transition-opacity\">\n        <div\n          class=\"absolute overflow-y-auto inset-0 bg-gray-200 backdrop-filter backdrop-blur-md bg-opacity-40 \"\n        >\n          <div\n            class=\"relative z-10 bg-white shadow-xl rounded-xl py-10 px-8 flex flex-col w-11/12 lg:w-1/3 my-40 mx-auto\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"modal création de post\"\n          >\n            <div>\n              <button\n                type=\"button\"\n                aria-label=\"fermer\"\n                @click=\"close\"\n                class=\"absolute -top-4 -right-4\"\n              >\n                <XCircleIcon\n                  class=\"h-10 w-10  text-pink-500 hover:text-pink-600\"\n                />\n              </button>\n            </div>\n            <h2 class=\"flex-start text-xl mb-6\">Créer un post</h2>\n\n            <form>\n              <div>\n                <textarea\n                  v-model=\"message\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"Votre message\"\n                  aria-label=\"Ecrire un message\"\n                />\n\n                <p class=\"text-sm font-thin italic text-left mb-6\">\n                  La publication doit contenir au moins un message, qui peut\n                  être agrémenté par une image issue d'un fichier, ou d'un\n                  lien.<br />\n                  Les images doivent utiliser les formats suivants : .jpeg,\n                  .png, .gif\n                </p>\n\n                <input\n                  @change=\"uploadFile\"\n                  ref=\"file\"\n                  name=\"image\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"file\"\n                  accept=\"image/png, image/jpeg, image/gif\"\n                  aria-label=\"Rajouter un fichier\"\n                />\n\n                <input\n                  v-model=\"link\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"Votre lien\"\n                  aria-label=\"Rajouter un lien\"\n                />\n              </div>\n\n              <div class=\"flex justify-center\">\n                <button\n                  type=\"button\"\n                  @click=\"\n                    submitPost();\n                    close();\n                  \"\n                  class=\" bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow-xl text-white font-bold py-2 px-4  mx-20\"\n                  :disabled=\"!validatedFields\"\n                  :class=\"{ 'opacity-25 cursor-not-allowed': !validatedFields }\"\n                >\n                  <span v-if=\"messages == 'Post publié !'\"\n                    >Publication en cours...</span\n                  >\n                  <span v-else>Publier</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { XCircleIcon } from \"@heroicons/vue/solid\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"postModal\",\n\n  components: { XCircleIcon },\n\n  data: function() {\n    return {\n      message: \"\",\n      file: null,\n      link: null,\n    };\n  },\n\n  computed: {\n    validatedFields: function() {\n      if (this.message != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    ...mapState({ messages: (state) => state.message }),\n  },\n\n  methods: {\n    uploadFile() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n    },\n\n    submitPost: function() {\n      const formData = new FormData(); // Permet de transmettre le formulaire dans un format adapté au backend\n\n      formData.append(\"message\", this.message);\n\n      if (this.link !== null) {\n        formData.append(\"link\", this.link);\n      }\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"createPost\", formData);\n    },\n\n    resetForm() {\n      // Permet de reset le formulaire\n      this.message = \"\";\n      this.link = null;\n      this.$refs.file.value = null;\n    },\n\n    close() {\n      this.$emit(\"close\");\n      this.resetForm(); // Reset du formulaire à la fermeture de la modal\n    },\n  },\n};\n</script>\n\n<style>\n.modal-fade-enter,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.5s ease-in-out;\n}\n</style>\n"],"sourceRoot":""}]}