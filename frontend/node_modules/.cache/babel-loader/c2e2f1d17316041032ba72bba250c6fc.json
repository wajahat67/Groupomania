{"remainingRequest":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wajahat98/Desktop/projet_7/frontend/src/components/Post.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wajahat98/Desktop/projet_7/frontend/src/components/Post.vue","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/babel.config.js","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js","mtime":1645449018164},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1645449018122}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IG1vZGlmeU1vZGFsIGZyb20gIi4uL2NvbXBvbmVudHMvUG9zdE1vZGlmeU1vZGFsLnZ1ZSI7CmltcG9ydCB7IFBlbmNpbEljb24sIFRyYXNoSWNvbiwgU3RhdHVzT25saW5lSWNvbiwgSGVhcnRJY29uLCBBbm5vdGF0aW9uSWNvbiwgQXJyb3dDaXJjbGVSaWdodEljb24gfSBmcm9tICJAaGVyb2ljb25zL3Z1ZS9zb2xpZCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUG9zdHMiLAogIGNvbXBvbmVudHM6IHsKICAgIG1vZGlmeU1vZGFsOiBtb2RpZnlNb2RhbCwKICAgIFBlbmNpbEljb246IFBlbmNpbEljb24sCiAgICBUcmFzaEljb246IFRyYXNoSWNvbiwKICAgIFN0YXR1c09ubGluZUljb246IFN0YXR1c09ubGluZUljb24sCiAgICBIZWFydEljb246IEhlYXJ0SWNvbiwKICAgIEFubm90YXRpb25JY29uOiBBbm5vdGF0aW9uSWNvbiwKICAgIEFycm93Q2lyY2xlUmlnaHRJY29uOiBBcnJvd0NpcmNsZVJpZ2h0SWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnQ6ICIiLAogICAgICBzaG93Q29tbWVudHM6IGZhbHNlLAogICAgICAvLyBMYSBkaXYgZGVzIGNvbW1lbnRhaXJlcyBuZSBzJ2FmZmljaGUgcGFzIMOgIGxhIGJhc2UKICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgLy8gTmkgbGEgbW9kYWxlIHBlcm1ldHRhbnQgZGUgbW9kaWZpZXIgdW4gcG9zdAogICAgICBkYXRhOiB7CiAgICAgICAgY29tbWVudDogIiIKICAgICAgfQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICAvLyBPbiByw6ljdXDDqXJlIHBvc3QgZHUgcGFyZW50LCBkb25jIGRlIFdhbGwudnVlCiAgICBwb3N0OiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubW9tZW50ID0gbW9tZW50OyAvLyBQZXJtZXQgbGUgZm9ybWF0YWdlIGRlIGxhIGRhdGUgZHUgcG9zdAoKICAgIG1vbWVudC5sb2NhbGUoImZyIik7CiAgfSwKICBtZXRob2RzOiB7CiAgICBtb2RpZnlQb3N0OiBmdW5jdGlvbiBtb2RpZnlQb3N0KGlkKSB7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZSwgdGhpcy4kcm91dGVyLnB1c2goIi9wb3N0cy8iLmNvbmNhdChpZCkpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0UG9zdEJ5SUQiLCBpZCk7IC8vIFLDqWN1cMOpcmF0aW9uIGR1IGNvbnRlbnUgZHUgcG9zdCBkw6hzIG91dmVydHVyZSBkZSBsYSBtb2RhbGUKICAgIH0sCiAgICBjbG9zZU1vZGlmeVBvc3Q6IGZ1bmN0aW9uIGNsb3NlTW9kaWZ5UG9zdCgpIHsKICAgICAgdGhpcy5zaG93TW9kYWwgPSBmYWxzZTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi93YWxsIik7CiAgICB9LAogICAgZGVsZXRlUG9zdDogZnVuY3Rpb24gZGVsZXRlUG9zdChpZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlT25lUG9zdCIsIGlkKTsKICAgIH0sCiAgICBsaWtlUG9zdDogZnVuY3Rpb24gbGlrZVBvc3QoaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInBvc3RMaWtlIiwgaWQpOwogICAgfSwKICAgIGNvbW1lbnRQb3N0OiBmdW5jdGlvbiBjb21tZW50UG9zdChpZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYWRkQ29tbWVudCIsIHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZGF0YTogdGhpcy5kYXRhCiAgICAgIH0pOwogICAgICB0aGlzLmRhdGEuY29tbWVudCA9ICIiOyAvLyBTdXBwcmltZSBsZSBjb21tZW50YWlyZSBkdSBkYXRhIGFwcsOocyBsJ2Vudm9pLCBwZXJtZXQgZGUgZmVybWVyIGxhIGRpdgogICAgfSwKICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoaWQpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImRlbGV0ZU9uZUNvbW1lbnQiLCBpZCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcG9zdExpa2VkOiBmdW5jdGlvbiBwb3N0TGlrZWQoKSB7CiAgICAgIC8vIExlIGJvdXRvbiBsaWtlIHJlc3RlIGVuIHJvc2Ugc2kgbCd1c2VyIGEgZMOpasOgIGxpa8OpIGwnYXJ0aWNsZQogICAgICB2YXIgdXNlcklkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySWQ7CiAgICAgIHZhciB1c2VyTGlrZSA9IHRoaXMucG9zdC5MaWtlcy5tYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgcmV0dXJuIGlkLlVzZXJJZC50b1N0cmluZygpOwogICAgICB9KTsgLy8gQSBjb252ZXJ0aXIgcG91ciBjb21wYXJhaXNvbiBhdmVjIHVzZXJJZAogICAgICAvL2NvbnNvbGUubG9nKHR5cGVvZiB1c2VySWQpOwogICAgICAvL2NvbnNvbGUubG9nKHR5cGVvZiB1c2VyTGlrZSk7CgogICAgICBpZiAodXNlckxpa2UuaW5jbHVkZXModXNlcklkKSkgewogICAgICAgIHJldHVybiAiaC02IHctNiBtci0xIHRleHQtcGluay02MDAgIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gImgtNiB3LTYgbXItMSB0ZXh0LWdyYXktMzAwIGhvdmVyOnRleHQtcGluay02MDAiOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGVkRmllbGRzOiBmdW5jdGlvbiB2YWxpZGF0ZWRGaWVsZHMoKSB7CiAgICAgIGlmICh0aGlzLmRhdGEuY29tbWVudCAhPSAiIikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/wajahat98/Desktop/projet_7/frontend/src/components/Post.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"flex flex-col\">\n    <div\n      class=\"flex flex-col mx-2 md:mx-20 my-4 py-4 px-4 border-2 rounded-md shadow-md\"\n    >\n      <div class=\"flex items-center\">\n        <div class=\"flex items-center\">\n          <img\n            v-if=\"post.User.picture !== null\"\n            class=\"inline object-cover rounded-full h-14 w-14 border-4 border-gray-300 mr-4\"\n            :src=\"post.User.picture\"\n            alt=\"photo de profil\"\n          />\n        </div>\n\n        <div class=\"flex flex-wrap flex-1 items-center\">\n          <router-link :to=\"`/profil/${post.User.id}`\">\n            <!-- Lien vers le profil du créateur du post -->\n            <p\n              class=\"text-center font-semibold text-gray-600 hover:text-pink-600\"\n            >\n              {{ post.User.username }}\n            </p>\n          </router-link>\n          <StatusOnlineIcon\n            v-if=\"$store.state.user.userId == post.User.id\"\n            class=\" h-6 w-6 ml-1 text-green-400\"\n          />\n          <p class=\"text-xs font-thin ml-2\">\n            {{ moment(post.createdAt).format(\"[le] DD MMMM YYYY\") }}\n          </p>\n        </div>\n\n        <!-- Si l'user est le propriétaire du post ou l'admin on autorise la modification ou la suppression -->\n        <div\n          class=\"flex flex-2 items-center justify-center\"\n          v-if=\"\n            $store.state.user.userId == post.User.id ||\n              $store.state.user.isAdmin == true\n          \"\n        >\n          <button\n            type=\"button\"\n            title=\"Modifer ce post\"\n            @click=\"modifyPost(post.id)\"\n          >\n            <PencilIcon\n              class=\"h-6 w-5 mr-4 text-gray-300 hover:text-gray-600\"\n            />\n          </button>\n          <modifyModal v-show=\"showModal\" @close=\"closeModifyPost\" />\n          <button\n            type=\"button\"\n            title=\"Supprimer ce post\"\n            @click=\"deletePost(post.id)\"\n          >\n            <TrashIcon class=\"h-6 w-5 mr-2 text-red-400 hover:text-red-600\" />\n          </button>\n        </div>\n      </div>\n\n      <div\n        v-if=\"post.imageURL !== null\"\n        class=\"flex justify-center border my-4 max-h-80\"\n      >\n        <img class=\"inline object-cover\" :src=\"post.imageURL\" alt=\"image postée\" />\n      </div>\n\n      <div\n        v-if=\"post.link !== null\"\n        class=\"flex justify-center border my-4 max-h-80\"\n      >\n        <img class=\"inline object-cover\" :src=\"post.link\" alt=\"gif posté\" />\n      </div>\n\n      <div class=\"flex flex-wrap mx-4 my-2\">\n        <p class=\"text-left\">{{ post.message }}</p>\n      </div>\n\n      <!-- Affichage du bouton like et commentaires, et de leurs compteurs -->\n      <div class=\"flex items-center my-2 px-4\">\n        <div class=\"flex justify-between items-center mr-2\">\n          <button type=\"button\" title=\"Liker\" @click=\"likePost(post.id)\">\n            <HeartIcon :class=\"postLiked\" />\n          </button>\n          <p class=\"text-xs font-light text-center\">{{ post.Likes.length }}</p>\n        </div>\n        <div class=\"flex justify-between items-center\">\n          <button\n            type=\"button\"\n            title=\"Accéder aux commentaires\"\n            @click=\"showComments = !showComments\"\n          >\n            <AnnotationIcon\n              class=\"h-6 w-6 mr-1 text-gray-300 hover:text-gray-600\"\n            />\n          </button>\n          <p class=\"text-xs font-light text-center\">\n            {{ post.Comments.length }}\n          </p>\n        </div>\n      </div>\n\n      <!-- Section commentaires -->\n      <div\n        class=\"flex flex-col w-full p-3 my-3 rounded-md bg-gray-50\"\n        v-show=\"showComments\"\n      >\n        <form>\n          <div class=\"flex items-center\">\n            <textarea\n              v-model=\"data.comment\"\n              class=\"w-full rounded-md p-2 mr-2 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n              type=\"text\"\n              rows=\"1\"\n              placeholder=\"Votre commentaire\"\n              aria-label=\"Ecrire un commentaire\"\n            />\n            <button\n              type=\"button\"\n              title=\"Envoyer le commentaire\"\n              @click=\"commentPost(post.id)\"\n            >\n              <ArrowCircleRightIcon\n                class=\"h-6 w-6  text-gray-400 hover:text-gray-600\"\n                :disabled=\"!validatedFields\"\n                :class=\"{ 'opacity-25 cursor-not-allowed': !validatedFields }\"\n              />\n            </button>\n          </div>\n        </form>\n        <div\n          class=\"items-center p-2 \n        \"\n        >\n          <div\n            v-for=\"comment of post.Comments\"\n            :key=\"comment.id\"\n            class=\"flex\n            my-2 items-center\"\n          >\n            <img\n              v-if=\"comment.User.picture !== null\"\n              class=\"inline object-cover rounded-full h-8 w-8  mr-2\"\n              :src=\"comment.User.picture\"\n              alt=\"photo de profil\"\n            />\n            <div\n              class=\"flex-col items-center w-full p-2 bg-gray-100 rounded-xl\"\n            >\n              <div class=\"flex items-center\">\n                <p class=\"text-sm font-semibold text-gray-600 mr-2\">\n                  {{ comment.User.username }}\n                </p>\n                <p class=\"text-xs font-thin\">\n                  {{\n                    moment(comment.createdAt).format(\n                      \"[le] DD MMMM YYYY [à] HH:mm\"\n                    )\n                  }}\n                </p>\n                <div\n                  v-if=\"\n                    $store.state.user.userId == comment.UserId ||\n                      $store.state.user.isAdmin == true\n                  \"\n                  class=\"\"\n                >\n                  <button\n                    type=\"button\"\n                    title=\"Supprimer ce commentaire\"\n                    @click=\"deleteComment(comment.id)\"\n                  >\n                    <TrashIcon\n                      class=\"h-4 w-4 ml-2 text-red-400 hover:text-red-600\"\n                    />\n                  </button>\n                </div>\n              </div>\n              <p class=\"text-sm font-light\">{{ comment.comment }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport modifyModal from \"../components/PostModifyModal.vue\";\n\nimport {\n  PencilIcon,\n  TrashIcon,\n  StatusOnlineIcon,\n  HeartIcon,\n  AnnotationIcon,\n  ArrowCircleRightIcon,\n} from \"@heroicons/vue/solid\";\n\nexport default {\n  name: \"Posts\",\n\n  components: {\n    modifyModal,\n    PencilIcon,\n    TrashIcon,\n    StatusOnlineIcon,\n    HeartIcon,\n    AnnotationIcon,\n    ArrowCircleRightIcon,\n  },\n\n  data: () => ({\n    comment: \"\",\n\n    showComments: false, // La div des commentaires ne s'affiche pas à la base\n\n    showModal: false, // Ni la modale permettant de modifier un post\n\n    data: {\n      comment: \"\",\n    },\n  }),\n\n  props: { // On récupére post du parent, donc de Wall.vue\n    post: {\n      type: Object,\n    },\n  },\n\n  created: function() {\n    this.moment = moment; // Permet le formatage de la date du post\n    moment.locale(\"fr\");\n  },\n\n  methods: {\n    modifyPost(id) {\n      (this.showModal = true), this.$router.push(`/posts/${id}`);\n      this.$store.dispatch(\"getPostByID\", id); // Récupération du contenu du post dès ouverture de la modale\n    },\n\n    closeModifyPost() {\n      this.showModal = false;\n      this.$router.push(\"/wall\");\n    },\n\n    deletePost(id) {\n      this.$store.dispatch(\"deleteOnePost\", id);\n    },\n\n    likePost(id) {\n      this.$store.dispatch(\"postLike\", id);\n    },\n\n    commentPost(id) {\n      this.$store.dispatch(\"addComment\", {\n        id: id,\n        data: this.data,\n      });\n      this.data.comment = \"\"; // Supprime le commentaire du data après l'envoi, permet de fermer la div\n    },\n\n    deleteComment(id) {\n      this.$store.dispatch(\"deleteOneComment\", id);\n    },\n  },\n\n  computed: {\n    postLiked() {\n      // Le bouton like reste en rose si l'user a déjà liké l'article\n      const userId = this.$store.state.user.userId;\n      let userLike = this.post.Likes.map((id) => id.UserId.toString()); // A convertir pour comparaison avec userId\n      //console.log(typeof userId);\n      //console.log(typeof userLike);\n      if (userLike.includes(userId)) {\n        return \"h-6 w-6 mr-1 text-pink-600 \";\n      } else {\n        return \"h-6 w-6 mr-1 text-gray-300 hover:text-pink-600\";\n      }\n    },\n\n    validatedFields: function() {\n      if (this.data.comment != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n};\n</script>\n\n<style></style>\n"],"sourceRoot":""}]}