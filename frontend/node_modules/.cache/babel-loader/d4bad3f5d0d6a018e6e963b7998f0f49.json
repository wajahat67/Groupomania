{"remainingRequest":"/Users/wajahat98/Desktop/test/frontend/node_modules/babel-loader/lib/index.js!/Users/wajahat98/Desktop/test/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wajahat98/Desktop/test/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue","mtime":1645452509941},{"path":"/Users/wajahat98/Desktop/test/frontend/babel.config.js","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/babel-loader/lib/index.js","mtime":1645449018164},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1645449018122}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3dhamFoYXQ5OC9EZXNrdG9wL3Rlc3QvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubGluay5qcyI7CmltcG9ydCB7IFhDaXJjbGVJY29uIH0gZnJvbSAiQGhlcm9pY29ucy92dWUvc29saWQiOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInBvc3RNb2RhbCIsCiAgY29tcG9uZW50czogewogICAgWENpcmNsZUljb246IFhDaXJjbGVJY29uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogIiIsCiAgICAgIGZpbGU6IG51bGwsCiAgICAgIGxpbms6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICB2YWxpZGF0ZWRGaWVsZHM6IGZ1bmN0aW9uIHZhbGlkYXRlZEZpZWxkcygpIHsKICAgICAgaWYgKHRoaXMubWVzc2FnZSAhPSAiIikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0sIG1hcFN0YXRlKHsKICAgIG1lc3NhZ2VzOiBmdW5jdGlvbiBtZXNzYWdlcyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubWVzc2FnZTsKICAgIH0KICB9KSksCiAgbWV0aG9kczogewogICAgdXBsb2FkRmlsZTogZnVuY3Rpb24gdXBsb2FkRmlsZSgpIHsKICAgICAgdmFyIGZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07CiAgICAgIHRoaXMuZmlsZSA9IGZpbGU7CiAgICB9LAogICAgc3VibWl0UG9zdDogZnVuY3Rpb24gc3VibWl0UG9zdCgpIHsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7IC8vIFBlcm1ldCBkZSB0cmFuc21ldHRyZSBsZSBmb3JtdWxhaXJlIGRhbnMgdW4gZm9ybWF0IGFkYXB0w6kgYXUgYmFja2VuZAoKICAgICAgZm9ybURhdGEuYXBwZW5kKCJtZXNzYWdlIiwgdGhpcy5tZXNzYWdlKTsKCiAgICAgIGlmICh0aGlzLmxpbmsgIT09IG51bGwpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImxpbmsiLCB0aGlzLmxpbmspOwogICAgICB9CgogICAgICBpZiAodGhpcy5maWxlICE9PSBudWxsKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJpbWFnZSIsIHRoaXMuZmlsZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjcmVhdGVQb3N0IiwgZm9ybURhdGEpOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICAvLyBQZXJtZXQgZGUgcmVzZXQgbGUgZm9ybXVsYWlyZQogICAgICB0aGlzLm1lc3NhZ2UgPSAiIjsKICAgICAgdGhpcy5saW5rID0gbnVsbDsKICAgICAgdGhpcy4kcmVmcy5maWxlLnZhbHVlID0gbnVsbDsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIik7CiAgICAgIHRoaXMucmVzZXRGb3JtKCk7IC8vIFJlc2V0IGR1IGZvcm11bGFpcmUgw6AgbGEgZmVybWV0dXJlIGRlIGxhIG1vZGFsCiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue"],"names":[],"mappings":";;AAoFA,SAAS,WAAT,QAA4B,sBAA5B;AACA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,WADO;AAGb,EAAA,UAAU,EAAE;AAAE,IAAA,WAAU,EAAV;AAAF,GAHC;AAKb,EAAA,IAAI,EAAE,gBAAW;AACf,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,IAAI,EAAE,IAFD;AAGL,MAAA,IAAI,EAAE;AAHD,KAAP;AAKD,GAXY;AAab,EAAA,QAAQ;AACN,IAAA,eAAe,EAAE,2BAAW;AAC1B,UAAI,KAAK,OAAL,IAAgB,EAApB,EAAwB;AACtB,eAAO,IAAP;AACF,OAFA,MAEO;AACL,eAAO,KAAP;AACF;AACD;AAPK,KASH,QAAQ,CAAC;AAAE,IAAA,QAAQ,EAAE,kBAAC,KAAD;AAAA,aAAW,KAAK,CAAC,OAAjB;AAAA;AAAZ,GAAD,CATL,CAbK;AAyBb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACM;AACX,UAAM,IAAG,GAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAsB,CAAtB,CAAb;AACA,WAAK,IAAL,GAAY,IAAZ;AACD,KAJM;AAMP,IAAA,UAAU,EAAE,sBAAW;AACrB,UAAM,QAAO,GAAI,IAAI,QAAJ,EAAjB,CADqB,CACY;;AAEjC,MAAA,QAAQ,CAAC,MAAT,CAAgB,SAAhB,EAA2B,KAAK,OAAhC;;AAEA,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,QAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACF;;AACA,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,QAAA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,IAA9B;AACF;;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,QAAnC;AACD,KAlBM;AAoBP,IAAA,SApBO,uBAoBK;AACV;AACA,WAAK,OAAL,GAAe,EAAf;AACA,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,GAAwB,IAAxB;AACD,KAzBM;AA2BP,IAAA,KA3BO,mBA2BC;AACN,WAAK,KAAL,CAAW,OAAX;AACA,WAAK,SAAL,GAFM,CAEY;AACnB;AA9BM;AAzBI,CAAf","sourcesContent":["<template>\n  <transition name=\"modal-fade\">\n    <div class=\"fixed bottom-0 inset-x-0 flex\" @click.stop>\n      <div class=\"fixed inset-0 transition-opacity\">\n        <div\n          class=\"absolute overflow-y-auto inset-0 bg-gray-200 backdrop-filter backdrop-blur-md bg-opacity-40 \"\n        >\n          <div\n            class=\"relative z-10 bg-white shadow-xl rounded-xl py-10 px-8 flex flex-col w-11/12 lg:w-1/3 my-40 mx-auto\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"modal création de post\"\n          >\n            <div>\n              <button\n                type=\"button\"\n                aria-label=\"fermer\"\n                @click=\"close\"\n                class=\"absolute -top-4 -right-4\"\n              >\n                <XCircleIcon\n                  class=\"h-10 w-10  text-pink-500 hover:text-pink-600\"\n                />\n              </button>\n            </div>\n            <h2 class=\"flex-start text-xl mb-6\">Créer un post</h2>\n\n            <form>\n              <div>\n                <textarea\n                  v-model=\"message\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"Votre message\"\n                  aria-label=\"Ecrire un message\"\n                />\n\n                <p class=\"text-sm font-thin italic text-left mb-6\">\n                  La publication doit contenir au moins un message, qui peut\n                  être agrémenté par une image issue d'un fichier, ou d'un\n                  lien.<br />\n                  Les images doivent utiliser les formats suivants : .jpeg,\n                  .png, .gif\n                </p>\n\n                <input\n                  @change=\"uploadFile\"\n                  ref=\"file\"\n                  name=\"image\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"file\"\n                  accept=\"image/png, image/jpeg, image/gif\"\n                  aria-label=\"Rajouter un fichier\"\n                />\n\n               \n              </div>\n\n              <div class=\"flex justify-center\">\n                <button\n                  type=\"button\"\n                  @click=\"\n                    submitPost();\n                    close();\n                  \"\n                  class=\" bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow-xl text-white font-bold py-2 px-4  mx-20\"\n                  :disabled=\"!validatedFields\"\n                  :class=\"{ 'opacity-25 cursor-not-allowed': !validatedFields }\"\n                >\n                  <span v-if=\"messages == 'Post publié !'\"\n                    >Publication en cours...</span\n                  >\n                  <span v-else>Publier</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { XCircleIcon } from \"@heroicons/vue/solid\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"postModal\",\n\n  components: { XCircleIcon },\n\n  data: function() {\n    return {\n      message: \"\",\n      file: null,\n      link: null,\n    };\n  },\n\n  computed: {\n    validatedFields: function() {\n      if (this.message != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    ...mapState({ messages: (state) => state.message }),\n  },\n\n  methods: {\n    uploadFile() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n    },\n\n    submitPost: function() {\n      const formData = new FormData(); // Permet de transmettre le formulaire dans un format adapté au backend\n\n      formData.append(\"message\", this.message);\n\n      if (this.link !== null) {\n        formData.append(\"link\", this.link);\n      }\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"createPost\", formData);\n    },\n\n    resetForm() {\n      // Permet de reset le formulaire\n      this.message = \"\";\n      this.link = null;\n      this.$refs.file.value = null;\n    },\n\n    close() {\n      this.$emit(\"close\");\n      this.resetForm(); // Reset du formulaire à la fermeture de la modal\n    },\n  },\n};\n</script>\n\n<style>\n.modal-fade-enter,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.5s ease-in-out;\n}\n</style>\n"],"sourceRoot":""}]}