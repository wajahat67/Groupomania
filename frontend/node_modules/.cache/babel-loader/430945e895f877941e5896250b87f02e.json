{"remainingRequest":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wajahat98/Desktop/projet_7/frontend/src/components/UserModifyModal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wajahat98/Desktop/projet_7/frontend/src/components/UserModifyModal.vue","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/babel.config.js","mtime":1643919861000},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/babel-loader/lib/index.js","mtime":1645449018164},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/projet_7/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1645449018122}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3dhamFoYXQ5OC9EZXNrdG9wL3Byb2pldF83L2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0IHsgWENpcmNsZUljb24gfSBmcm9tICJAaGVyb2ljb25zL3Z1ZS9zb2xpZCI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibW9kaWZ5TW9kYWwiLAogIGNvbXBvbmVudHM6IHsKICAgIFhDaXJjbGVJY29uOiBYQ2lyY2xlSWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIGZpbGU6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBtZXNzYWdlczogZnVuY3Rpb24gbWVzc2FnZXMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLm1lc3NhZ2U7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0KICB9KSksIHt9LCB7CiAgICB2YWxpZGF0ZWRGaWVsZHM6IGZ1bmN0aW9uIHZhbGlkYXRlZEZpZWxkcygpIHsKICAgICAgaWYgKHRoaXMudXNlcm5hbWUgIT09ICIiIHx8IHRoaXMuZGVzY3JpcHRpb24gIT09ICIiIHx8IHRoaXMuZmlsZSAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIHVwbG9hZEZpbGU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7CiAgICAgIHZhciBmaWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgfSwKICAgIHVwZGF0ZVByb2ZpbDogZnVuY3Rpb24gdXBkYXRlUHJvZmlsKCkgewogICAgICAvLyBNw6ptZSBzY2jDqW1hIHF1ZSBwb3VyIGxhIGNyw6lhdGlvbiBkZXMgcG9zdHMsIG1pcyDDoCBwYXJ0IHF1ZSBsZSBwYXlsb2FkIGNvbXBvcnRlIGwnaWQgZHUgcG9zdCBlbiBwbHVzIGR1IGRhdGEKICAgICAgdmFyIGlkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySWQ7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICAgICAgaWYgKHRoaXMudXNlcm5hbWUgIT09ICIiKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJ1c2VybmFtZSIsIHRoaXMudXNlcm5hbWUpOwogICAgICB9CgogICAgICBpZiAodGhpcy5kZXNjcmlwdGlvbiAhPT0gIiIpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2NyaXB0aW9uIiwgdGhpcy5kZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmZpbGUgIT09IG51bGwpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5maWxlKTsKICAgICAgfQoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZVVzZXJJbmZvcyIsIHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/wajahat98/Desktop/projet_7/frontend/src/components/UserModifyModal.vue"],"names":[],"mappings":";;;AAyFA,SAAS,WAAT,QAA4B,sBAA5B;AACA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,aADO;AAGb,EAAA,UAAU,EAAE;AAAE,IAAA,WAAU,EAAV;AAAF,GAHC;AAKb,EAAA,IAAI,EAAE,gBAAW;AACf,WAAO;AACL,MAAA,QAAQ,EAAE,EADL;AAEL,MAAA,KAAK,EAAE,EAFF;AAGL,MAAA,WAAW,EAAE,EAHR;AAIL,MAAA,IAAI,EAAE;AAJD,KAAP;AAMD,GAZY;AAcb,EAAA,QAAQ,kCACH,QAAQ,CAAC;AACV,IAAA,QAAQ,EAAE,kBAAC,KAAD;AAAA,aAAW,KAAK,CAAC,OAAjB;AAAA,KADA;AAEV,IAAA,IAAI,EAAE,cAAC,KAAD;AAAA,aAAW,KAAK,CAAC,IAAjB;AAAA;AAFI,GAAD,CADL;AAMN,IAAA,eAAe,EAAE,2BAAW;AAC1B,UACE,KAAK,QAAL,KAAkB,EAAlB,IACA,KAAK,WAAL,KAAqB,EADrB,IAEA,KAAK,IAAL,KAAc,IAHhB,EAIE;AACA,eAAO,IAAP;AACF,OANA,MAMO;AACL,eAAO,KAAP;AACF;AACD;AAhBK,IAdK;AAiCb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACM;AACX,UAAM,IAAG,GAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAsB,CAAtB,CAAb;AACA,WAAK,IAAL,GAAY,IAAZ;AACD,KAJM;AAMP,IAAA,YAAY,EAAE,wBAAW;AACvB;AAEA,UAAI,EAAC,GAAI,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,MAAhC;AAEA,UAAM,QAAO,GAAI,IAAI,QAAJ,EAAjB;;AAEA,UAAI,KAAK,QAAL,KAAkB,EAAtB,EAA0B;AACxB,QAAA,QAAQ,CAAC,MAAT,CAAgB,UAAhB,EAA4B,KAAK,QAAjC;AACF;;AAEA,UAAI,KAAK,WAAL,KAAqB,EAAzB,EAA6B;AAC3B,QAAA,QAAQ,CAAC,MAAT,CAAgB,aAAhB,EAA+B,KAAK,WAApC;AACF;;AACA,UAAI,KAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,QAAA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,IAA9B;AACF;;AAEA,WAAK,MAAL,CAAY,QAAZ,CAAqB,iBAArB,EAAwC;AACtC,QAAA,EAAE,EAAE,EADkC;AAEtC,QAAA,IAAI,EAAE;AAFgC,OAAxC;AAID,KA5BM;AA8BP,IAAA,KA9BO,mBA8BC;AACN,WAAK,KAAL,CAAW,OAAX;AACD;AAhCM;AAjCI,CAAf","sourcesContent":["<template>\n  <transition name=\"modal-fade\">\n    <div class=\"fixed bottom-0 inset-x-0 flex\" @click.stop>\n      <div class=\"fixed inset-0 transition-opacity\">\n        <div\n          class=\"absolute overflow-y-auto inset-0 bg-gray-200 backdrop-filter backdrop-blur-md bg-opacity-40\"\n        >\n          <div\n            class=\"relative z-10 bg-white shadow-xl rounded-xl py-10 px-8 flex flex-col justify-center items-center w-11/12 lg:w-1/3 my-40 mx-auto\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"modal modification de post\"\n          >\n            <div>\n              <button\n                type=\"button\"\n                aria-label=\"fermer\"\n                @click=\"close\"\n                class=\"absolute -top-4 -right-4\"\n              >\n                <XCircleIcon\n                  class=\"h-10 w-10  text-pink-500 hover:text-pink-600\"\n                />\n              </button>\n            </div>\n            <h2 class=\"flex-start text-xl mb-6\">Modifier un profil</h2>\n\n            <form>\n              <div>\n                <textarea\n                  v-model=\"username\"\n                  class=\"w-full rounded-md h-12 p-2 mb-2 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"Nom d'utilisateur\"\n                  aria-label=\"Changer nom d'utilisateur\"\n                />\n              </div>\n\n              <div>\n                <textarea\n                  v-model=\"description\"\n                  class=\"w-full rounded-md h-40 p-2 mb-2 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"A propos de vous\"\n                  aria-label=\"Changer de description\"\n                />\n              </div>\n\n              <span class=\"text-sm font-thin mb-2\"\n                >Modifier votre photo de profil</span\n              >\n              <input\n                @change=\"uploadFile\"\n                ref=\"file\"\n                label\n                for=\"image\"\n                name=\"image\"\n                class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                type=\"file\"\n                accept=\"image/png, image/jpeg, image/gif\"\n                aria-label=\"Changer la photo de profil\"\n              />\n\n              <div class=\"flex justify-center\">\n                <button\n                  type=\"button\"\n                  @click=\"\n                    updateProfil();\n                    close();\n                  \"\n                  class=\" bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow-xl text-white font-bold py-2 px-4  mx-20\"\n                  :disabled=\"!validatedFields\"\n                  :class=\"{ 'opacity-25 cursor-not-allowed': !validatedFields }\"\n                >\n                  <span v-if=\"messages == 'Post modifié !'\"\n                    >Modification en cours...</span\n                  >\n                  <span v-else>Modifier</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { XCircleIcon } from \"@heroicons/vue/solid\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"modifyModal\",\n\n  components: { XCircleIcon },\n\n  data: function() {\n    return {\n      username: \"\",\n      email: \"\",\n      description: \"\",\n      file: null,\n    };\n  },\n\n  computed: {\n    ...mapState({\n      messages: (state) => state.message,\n      user: (state) => state.user,\n    }),\n\n    validatedFields: function() {\n      if (\n        this.username !== \"\" ||\n        this.description !== \"\" ||\n        this.file !== null\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n\n  methods: {\n    uploadFile() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n    },\n\n    updateProfil: function() {\n      // Même schéma que pour la création des posts, mis à part que le payload comporte l'id du post en plus du data\n\n      let id = this.$store.state.user.userId;\n\n      const formData = new FormData();\n\n      if (this.username !== \"\") {\n        formData.append(\"username\", this.username);\n      }\n\n      if (this.description !== \"\") {\n        formData.append(\"description\", this.description);\n      }\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n\n      this.$store.dispatch(\"updateUserInfos\", {\n        id: id,\n        data: formData,\n      });\n    },\n\n    close() {\n      this.$emit(\"close\");\n    },\n  },\n};\n</script>\n\n<style>\n.modal-fade-enter,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.5s ease-in-out;\n}\n</style>\n"],"sourceRoot":""}]}