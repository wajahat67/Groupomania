{"remainingRequest":"/Users/wajahat98/Desktop/test/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue?vue&type=style&index=0&id=105f0f6d&lang=css","dependencies":[{"path":"/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue","mtime":1645452509941},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/css-loader/dist/cjs.js","mtime":1645449018043},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1645449018332},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/postcss-loader/src/index.js","mtime":1645449018127},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1645449017842},{"path":"/Users/wajahat98/Desktop/test/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1645449018122}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5tb2RhbC1mYWRlLWVudGVyLAoubW9kYWwtZmFkZS1sZWF2ZS10byB7CiAgb3BhY2l0eTogMDsKfQoKLm1vZGFsLWZhZGUtZW50ZXItYWN0aXZlLAoubW9kYWwtZmFkZS1sZWF2ZS1hY3RpdmUgewogIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlLWluLW91dDsKfQo="},{"version":3,"sources":["/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue"],"names":[],"mappings":";AAoJA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACZ;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACtC","file":"/Users/wajahat98/Desktop/test/frontend/src/components/PostModal.vue","sourceRoot":"","sourcesContent":["<template>\n  <transition name=\"modal-fade\">\n    <div class=\"fixed bottom-0 inset-x-0 flex\" @click.stop>\n      <div class=\"fixed inset-0 transition-opacity\">\n        <div\n          class=\"absolute overflow-y-auto inset-0 bg-gray-200 backdrop-filter backdrop-blur-md bg-opacity-40 \"\n        >\n          <div\n            class=\"relative z-10 bg-white shadow-xl rounded-xl py-10 px-8 flex flex-col w-11/12 lg:w-1/3 my-40 mx-auto\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-label=\"modal création de post\"\n          >\n            <div>\n              <button\n                type=\"button\"\n                aria-label=\"fermer\"\n                @click=\"close\"\n                class=\"absolute -top-4 -right-4\"\n              >\n                <XCircleIcon\n                  class=\"h-10 w-10  text-pink-500 hover:text-pink-600\"\n                />\n              </button>\n            </div>\n            <h2 class=\"flex-start text-xl mb-6\">Créer un post</h2>\n\n            <form>\n              <div>\n                <textarea\n                  v-model=\"message\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"text\"\n                  placeholder=\"Votre message\"\n                  aria-label=\"Ecrire un message\"\n                />\n\n                <p class=\"text-sm font-thin italic text-left mb-6\">\n                  La publication doit contenir au moins un message, qui peut\n                  être agrémenté par une image issue d'un fichier, ou d'un\n                  lien.<br />\n                  Les images doivent utiliser les formats suivants : .jpeg,\n                  .png, .gif\n                </p>\n\n                <input\n                  @change=\"uploadFile\"\n                  ref=\"file\"\n                  name=\"image\"\n                  class=\"w-full rounded-md p-2 mb-6 border-2 border-gray-400 outline-none focus:ring-2 focus:ring-gray-400\"\n                  type=\"file\"\n                  accept=\"image/png, image/jpeg, image/gif\"\n                  aria-label=\"Rajouter un fichier\"\n                />\n\n               \n              </div>\n\n              <div class=\"flex justify-center\">\n                <button\n                  type=\"button\"\n                  @click=\"\n                    submitPost();\n                    close();\n                  \"\n                  class=\" bg-gray-500 hover:bg-gray-600 rounded-md hover:shadow-xl text-white font-bold py-2 px-4  mx-20\"\n                  :disabled=\"!validatedFields\"\n                  :class=\"{ 'opacity-25 cursor-not-allowed': !validatedFields }\"\n                >\n                  <span v-if=\"messages == 'Post publié !'\"\n                    >Publication en cours...</span\n                  >\n                  <span v-else>Publier</span>\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { XCircleIcon } from \"@heroicons/vue/solid\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"postModal\",\n\n  components: { XCircleIcon },\n\n  data: function() {\n    return {\n      message: \"\",\n      file: null,\n      link: null,\n    };\n  },\n\n  computed: {\n    validatedFields: function() {\n      if (this.message != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    ...mapState({ messages: (state) => state.message }),\n  },\n\n  methods: {\n    uploadFile() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n    },\n\n    submitPost: function() {\n      const formData = new FormData(); // Permet de transmettre le formulaire dans un format adapté au backend\n\n      formData.append(\"message\", this.message);\n\n      if (this.link !== null) {\n        formData.append(\"link\", this.link);\n      }\n      if (this.file !== null) {\n        formData.append(\"image\", this.file);\n      }\n      this.$store.dispatch(\"createPost\", formData);\n    },\n\n    resetForm() {\n      // Permet de reset le formulaire\n      this.message = \"\";\n      this.link = null;\n      this.$refs.file.value = null;\n    },\n\n    close() {\n      this.$emit(\"close\");\n      this.resetForm(); // Reset du formulaire à la fermeture de la modal\n    },\n  },\n};\n</script>\n\n<style>\n.modal-fade-enter,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.5s ease-in-out;\n}\n</style>\n"]}]}